(()=>{"use strict";function t(t){const e=new Date;return e.setDate(e.getDate()+t),e.toISOString()}const e={todos:[{todo_id:1,status_id:1,category_id:1,todo:"Todo1",deleted:!1},{todo_id:2,status_id:2,category_id:2,todo:"Hover your mouse over a project or item and click the icon on the right side of the item for more",due_date:t(-1)},{todo_id:3,status_id:3,category_id:3,todo:"Todo3",due_date:function(t){const e=new Date;return e.setMinutes(e.getMinutes()+1),e.toISOString()}()},{todo_id:4,status_id:4,category_id:1,todo:"Todo4",due_date:t(1),completed:!0,deleted:!1},{todo_id:5,status_id:4,todo:"Todo5"},{todo_id:6,status_id:4,todo:"Todo6",completed:!0,deleted:!1},{todo_id:7,status_id:2,todo:"Todo7",completed:!0,deleted:!0}]};self.VERSION="1.0.0";const o="/api/get_todos",s={"Content-Type":"application/json; charset=utf-8"};let n;const{log:a}=console;async function i(){const t=await caches.open("todo-sw"),e=JSON.stringify(n);await t.put(o,new Response(e,{headers:new Headers({...s,"Cache-Control":"max-age=31536000","Content-Length":String(e.length)})}))}async function d(){if(void 0===n)try{const t=await caches.open("todo-sw"),s=await t.match(o);if(void 0!==s){const t=await s.json();t&&(n=t)}n||(n=e,await i())}catch(t){a("sw: error in loadState",t)}return!0}self.onerror=function(t){const{log:e}=console;e("sw error:",t)},self.addEventListener("fetch",(async function(t){var e=new URL(t.request.url);const o=e.pathname.slice(5);if("POST"!==t.request.method)if("PATCH"!==t.request.method)if("DELETE"!==t.request.method)"GET"!==t.request.method||"/api/get_todos"!==e.pathname||t.respondWith(d().then((()=>new Response(JSON.stringify(n),{headers:s}))));else{const e=t.request.clone();t.respondWith(d().then((()=>async function(t,e){const o=await t.json();switch(e){case"delete_category":case"delete_todo":return new Response(JSON.stringify(o),{status:200});default:return new Response(null,{status:404})}}(e,o))).then((t=>(i(),t))))}else{const e=t.request.clone();t.respondWith(d().then((()=>async function(t,e){const o=await t.json();switch(e){case"update_category":case"update_todo":return new Response(JSON.stringify(o),{status:200});default:return new Response(null,{status:404})}}(e,o))).then((t=>(i(),t))))}else{if(!t.request.body)return;const e=t.request.clone();t.respondWith(d().then((()=>async function(t,e){const o=await t.json();switch(e){case"create_category":return new Response(JSON.stringify(o),{headers:s,status:200});case"create_todo":return new Response(JSON.stringify(o),{status:200});case"log":{const{log:t}=console;switch(o.type){case"info":t("%c[INFO]","color: blue; font-weight: 600;",o);break;case"warn":t("%c[WARN]","color: #ff9905; font-weight: 600;",o);break;case"error":t(o),t("%c[ERROR]","color: #E56353;; font-weight: 600;",o)}return new Response(null,{status:200})}default:return new Response(null,{status:404})}}(e,o))).then((t=>(i(),t))))}})),self.addEventListener("install",(t=>{self.skipWaiting()})),self.addEventListener("activate",(t=>{t.waitUntil((async()=>{n||await d()})()),clients.claim()}))})();